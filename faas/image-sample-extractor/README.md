# Image Sample Extractor üñºÔ∏è

![GitHub package.json version (subfolder of monorepo)](https://img.shields.io/github/package-json/v/FraunhoferISST/diva?color=green&filename=faas%2Fimage-sample-extractor%2Fpackage.json)

This service gets an image file as input and generates a `base64` encoded thumbnail as output.
The produced JSON result is written to the output file.

## Accepted mime types

+ `image/jpeg`

### Configuration

Environment variables:

Name | Default | Description
--- | --- | ---
INPUT_FILE    |  |  A path to the input file to be analyzed
OUTPUT_FILE  | |  A path to the resulting output file

### Dependencies

```sh
npm i
```

### Run

```sh
# if environment ist defined in IDE
npm run start

# manually set ENV variables
INPUT_FILE=test.jpg OUTPUT_FILE=test_output.json node app.js
```

## Example Output

```json
{
    "imageThumbnail":"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"
}
```

## License

Copyright ¬© Fraunhofer ISST 2022
